(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-my-edit"],{"6b40":function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return i}));var i={uniPopup:a("33bf").default},s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"b2mg"},[e.userData?a("v-uni-view",{staticStyle:{"padding-top":"48rpx"}},[a("v-uni-view",{staticClass:"edit-row avatar",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseFile.apply(void 0,arguments)}}},[a("v-uni-image",{staticClass:"avatar-img b2radius",attrs:{src:e.userData.avatar,mode:"aspectFill"}}),a("b2font",{attrs:{type:"b2xiangji b2radius",size:"60"}})],1),a("v-uni-view",{staticClass:"edit-row"},[a("v-uni-view",{staticClass:"edit-title"},[e._v("基本资料")]),a("v-uni-view",{staticClass:"edit-row-in bold-light flex-center",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.open("name")}}},[a("v-uni-view",{staticClass:"c9"},[e._v("昵称")]),a("v-uni-view",[e._v(e._s(e.userData.name))])],1),a("v-uni-view",{staticClass:"edit-row-in bold-light flex-center",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.open("desc")}}},[a("v-uni-view",{staticClass:"c9"},[e._v("简介")]),a("v-uni-view",{staticClass:"lin-1 lin-2"},[e._v(e._s(e.userData.desc?e.userData.desc:"暂无介绍"))])],1),a("v-uni-view",{staticClass:"edit-row-in bold-light flex-center",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.open("sex")}}},[a("v-uni-view",{staticClass:"c9"},[e._v("性别")]),a("v-uni-view",[e._v(e._s("0"==e.userData.sex?"女":"男"))])],1)],1),e.editData.email||e.editData.phone?a("v-uni-view",{staticClass:"edit-row",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.open("password")}}},[a("v-uni-view",{staticClass:"edit-row-in bold-light flex-center"},[a("v-uni-view",{staticClass:"c9"},[e._v("密码")]),a("v-uni-view",[e._v("修改密码")])],1),a("v-uni-view",{staticClass:"edit-desc"})],1):e._e(),"tel"==e.editData.check_type||"telandemail"==e.editData.check_type?a("v-uni-view",{staticClass:"edit-row",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.open("phone")}}},[a("v-uni-view",{staticClass:"edit-title"},[e._v("绑定手机")]),a("v-uni-view",{staticClass:"edit-row-in bold-light flex-center"},[a("v-uni-view",{staticClass:"c9"},[e._v("手机号码")]),a("v-uni-view",[e._v(e._s(e.editData.phone?e.editData.phone:"立刻绑定"))])],1)],1):e._e(),"email"==e.editData.check_type||"telandemail"==e.editData.check_type?a("v-uni-view",{staticClass:"edit-row",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.open("email")}}},[a("v-uni-view",{staticClass:"edit-title"},[e._v("绑定邮箱")]),a("v-uni-view",{staticClass:"edit-row-in bold-light flex-center"},[a("v-uni-view",{staticClass:"c9"},[e._v("邮箱地址")]),a("v-uni-view",[e._v(e._s(e.editData.email?e.editData.email:"立刻绑定"))])],1)],1):e._e(),e.editData?a("v-uni-view",{staticClass:"edit-row",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.open("address")}}},[a("v-uni-view",{staticClass:"edit-title"},[e._v("地址管理")]),a("v-uni-view",{staticClass:"edit-row-in bold-light flex-center"},[a("v-uni-view",{staticClass:"c9"},[e._v("默认地址")]),a("v-uni-view",[a("v-uni-view",{staticClass:"fs12"},[e.editData.default_address?a("v-uni-view",[a("v-uni-view",{staticClass:"bold-light fs14"},[a("v-uni-text",[e._v(e._s(e.editData.address[e.editData.default_address].name))]),a("v-uni-text",[e._v(e._s(e.editData.address[e.editData.default_address].phone))])],1),a("v-uni-view",{staticClass:"fs13"},[e.editData.address[e.editData.default_address].province?a("v-uni-text",[e._v(e._s(e.editData.address[e.editData.default_address].province))]):e._e(),e.editData.address[e.editData.default_address].city?a("v-uni-text",[e._v(e._s(e.editData.address[e.editData.default_address].city))]):e._e(),e.editData.address[e.editData.default_address].county?a("v-uni-text",[e._v(e._s(e.editData.address[e.editData.default_address].county))]):e._e(),a("v-uni-text",[e._v(e._s(e.editData.address[e.editData.default_address].address))])],1)],1):a("v-uni-view",[e._v("收货地址为空，请添加收货地址")])],1)],1)],1)],1):e._e(),a("v-uni-view",{staticClass:"login-out b2mg"},[a("v-uni-text",{staticClass:"fs16",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.loginOut.apply(void 0,arguments)}}},[e._v("退出我的账号")])],1)],1):e._e(),a("uni-popup",{ref:"popup",attrs:{type:"bottom","mask-click":!e.saveLocked},on:{maskClick:function(t){arguments[0]=t=e.$handleEvent(t),e.closePopup.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"edit-box"},[a("v-uni-view",{staticClass:"circle-list-top"},[a("v-uni-view",{staticClass:"fs14",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.closePopup.apply(void 0,arguments)}}},[e._v("关闭")]),a("v-uni-view",["name"==e.type?a("v-uni-text",[e._v("您的新昵称")]):e._e(),"desc"==e.type?a("v-uni-text",[e._v("一句话介绍")]):e._e(),"password"==e.type?a("v-uni-text",[e._v("修改密码")]):e._e(),"sex"==e.type?a("v-uni-text",[e._v("选择性别")]):e._e(),"phone"==e.type?a("v-uni-text",[e._v("绑定手机")]):e._e()],1),"phone"!=e.type&&"email"!=e.type?a("v-uni-button",{staticClass:"b2color fs12 text",attrs:{loading:e.saveLocked,disabled:e.saveLocked},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.save.apply(void 0,arguments)}}},[e._v(e._s(e.saveLocked?"保存中":"保存"))]):e._e()],1),"name"==e.type?a("v-uni-view",{staticClass:"edit-in"},[a("v-uni-input",{staticClass:"edit-input",attrs:{type:"text",focus:e.isFocus},model:{value:e.userData.name,callback:function(t){e.$set(e.userData,"name",t)},expression:"userData.name"}})],1):e._e(),"desc"==e.type?a("v-uni-view",{staticClass:"edit-in"},[a("v-uni-textarea",{staticClass:"edit-input",attrs:{type:"text",focus:e.isFocus},model:{value:e.userData.desc,callback:function(t){e.$set(e.userData,"desc",t)},expression:"userData.desc"}})],1):e._e(),"password"==e.type?a("v-uni-view",{staticClass:"edit-in"},[a("v-uni-input",{staticClass:"edit-input",attrs:{type:"text",focus:e.isFocus,placeholder:"请输入密码"},model:{value:e.userData.password,callback:function(t){e.$set(e.userData,"password",t)},expression:"userData.password"}}),a("v-uni-input",{staticClass:"edit-input",attrs:{type:"text",placeholder:"请重复输入密码"},model:{value:e.userData.repassword,callback:function(t){e.$set(e.userData,"repassword",t)},expression:"userData.repassword"}})],1):e._e(),"sex"==e.type?a("v-uni-view",{staticClass:"edit-in"},[a("v-uni-radio-group",{staticClass:"sex-select",on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.sexChange.apply(void 0,arguments)}}},[a("v-uni-label",{staticClass:"sex-1"},[a("v-uni-radio",{staticStyle:{transform:"scale(0.7)"},attrs:{value:"0",checked:"0"==e.userData.sex}}),e._v("女")],1),a("v-uni-label",{staticClass:"sex-1"},[a("v-uni-radio",{staticStyle:{transform:"scale(0.7)"},attrs:{value:"1",checked:"1"==e.userData.sex}}),e._v("男")],1)],1)],1):e._e(),"phone"==e.type?a("v-uni-view",{staticClass:"edit-in"},[a("v-uni-view",[e._v("请输入您的手机号码")]),a("v-uni-view",[a("v-uni-input",{staticClass:"edit-input",attrs:{type:"text",placeholder:"手机号码",focus:e.isFocus},model:{value:e.editData.phone,callback:function(t){e.$set(e.editData,"phone",t)},expression:"editData.phone"}})],1),a("v-uni-view",{staticClass:"versend"},[a("v-uni-input",{staticClass:"vercode edit-input",attrs:{type:"text",placeholder:"验证码"},model:{value:e.phoneVerCode,callback:function(t){e.phoneVerCode=t},expression:"phoneVerCode"}}),a("v-uni-button",{staticClass:"sendbutton empty",attrs:{disabled:e.sms.locked||!e.editData.phone},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getRecaptcha.apply(void 0,arguments)}}},[e._v(e._s(e.sms.locked?e.count+"秒后重新发送":"获取验证码"))])],1),a("v-uni-view",{staticClass:"savebutton"},[a("v-uni-button",{attrs:{loading:e.saveLocked,disabled:e.saveLocked},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.save.apply(void 0,arguments)}}},[e._v("保存")])],1)],1):e._e(),"email"==e.type?a("v-uni-view",{staticClass:"edit-in"},[a("v-uni-view",[e._v("请输入您的邮箱")]),a("v-uni-view",[a("v-uni-input",{staticClass:"edit-input",attrs:{type:"text",placeholder:"邮箱地址",focus:e.isFocus},model:{value:e.editData.email,callback:function(t){e.$set(e.editData,"email",t)},expression:"editData.email"}})],1),a("v-uni-view",{staticClass:"versend"},[a("v-uni-input",{staticClass:"vercode edit-input",attrs:{type:"text",placeholder:"验证码"},model:{value:e.emailVerCode,callback:function(t){e.emailVerCode=t},expression:"emailVerCode"}}),a("v-uni-button",{staticClass:"sendbutton empty",attrs:{disabled:e.sms.locked||!e.editData.email},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getRecaptcha.apply(void 0,arguments)}}},[e._v(e._s(e.sms.locked?e.count+"秒后重新发送":"获取验证码"))])],1),a("v-uni-view",{staticClass:"savebutton"},[a("v-uni-button",{attrs:{loading:e.saveLocked,disabled:e.saveLocked},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.save.apply(void 0,arguments)}}},[e._v("保存")])],1)],1):e._e()],1)],1),a("uni-popup",{ref:"popupcode",attrs:{type:"top"}},[a("v-uni-view",{staticClass:"cp-step"},[a("v-uni-view",{staticClass:"cp-step-in flex-center"},[a("v-uni-view",{staticClass:"c-title"},[e._v("你是机器人吗？")]),a("v-uni-view",{staticClass:"c-img-box"},[e.recaptchaUrl?a("v-uni-image",{staticClass:"c-img",attrs:{src:e.recaptchaUrl,mode:"aspectFit"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getRecaptcha.apply(void 0,arguments)}}}):e._e()],1),a("v-uni-view",{staticClass:"fs14 gray"},[a("v-uni-text",{staticClass:"c-desc"},[e._v("请输入图片中的验证码")]),a("v-uni-text",{staticClass:"c-desc"},[e._v("点击「我是人类」按钮获取验证码")])],1),a("v-uni-input",{staticClass:"inp",attrs:{type:"text"},model:{value:e.imgcheck.img_code,callback:function(t){e.$set(e.imgcheck,"img_code",t)},expression:"imgcheck.img_code"}}),a("v-uni-view",{staticClass:"flex-center c-action"},[a("v-uni-button",{staticClass:"can-button",attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.imgCodeCancel.apply(void 0,arguments)}}},[e._v("取消")]),a("v-uni-button",{staticClass:"c-button",attrs:{disabled:e.imgcheck.locked||4!=e.imgcheck.img_code.length},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.imgCodeCheck.apply(void 0,arguments)}}},[e._v("我是人类")])],1)],1)],1)],1)],1)},n=[]},"6cbf":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.sex-select .sex-1[data-v-4c15d29b]{margin-right:%?24?%;margin-top:%?60?%}.circle-list-top[data-v-4c15d29b]{position:relative;text-align:center;padding:%?24?%;margin-bottom:%?24?%;border-bottom:1px solid #efefef;display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center}.edit-in[data-v-4c15d29b]{padding:1px %?48?%;-webkit-box-sizing:border-box;box-sizing:border-box}.edit-input[data-v-4c15d29b]{background-color:#f5f6f7;padding:%?32?%;font-size:%?32?%;margin-top:%?16?%;-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;min-height:%?110?%}.sex-select[data-v-4c15d29b]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column}.disabled[data-v-4c15d29b]{opacity:.5}.edit-box[data-v-4c15d29b]{background-color:#fff;width:100%;height:calc(100vh - 100px)}.edit-box .b2color.fs12[data-v-4c15d29b]{margin:0}.versend[data-v-4c15d29b]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.versend .sendbutton[data-v-4c15d29b]{width:%?400?%;font-size:%?32?%;margin-left:%?16?%;height:%?100?%;line-height:%?100?%;margin-top:%?16?%}.edit-row[data-v-4c15d29b]{margin-bottom:%?48?%;padding-bottom:%?49?%;border-bottom:1px solid #f0f0f0}.edit-desc[data-v-4c15d29b]{font-size:%?24?%;color:silver}.edit-title[data-v-4c15d29b]{font-weight:700}.edit-row-in[data-v-4c15d29b]{margin-top:%?48?%}.avatar[data-v-4c15d29b]{position:relative}.avatar-img[data-v-4c15d29b], .avatar[data-v-4c15d29b]{width:%?160?%;height:%?160?%}.avatar-img[data-v-4c15d29b]{position:absolute;left:0;top:0;width:100%;height:100%}.avatar .b2font[data-v-4c15d29b]{width:100%;text-align:center;height:%?160?%;line-height:%?160?%;position:relative;z-index:2;color:#fff;background-color:rgba(0,0,0,.3)}.edit-row-in[data-v-4c15d29b]{font-size:%?30?%}.edit-row-in .c9[data-v-4c15d29b]{width:%?180?%;min-width:%?180?%}.edit-row.avatar[data-v-4c15d29b]{border:0;padding-bottom:0}.open-box[data-v-4c15d29b]{margin-top:%?24?%}.open-name[data-v-4c15d29b]{margin-top:%?10?%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column;width:80%}.open-item[data-v-4c15d29b]{width:%?200?%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column;margin-right:%?24?%}.open-avatar[data-v-4c15d29b]{background-color:#efefef;width:%?200?%;height:%?200?%;position:relative}.open-image[data-v-4c15d29b]{position:absolute;left:0;top:0;width:100%;height:100%}.bd-button[data-v-4c15d29b]{font-size:%?24?%!important;height:%?54?%!important;line-height:%?54?%!important;padding:0 %?32?%!important;background-color:rgba(25,133,255,.2)!important;color:#1985ff!important}.bd-button[data-v-4c15d29b]::after{border:0}.bd-button.empty[data-v-4c15d29b]{background-color:hsla(0,0%,100%,.6)!important;color:#212121!important}.bd-box[data-v-4c15d29b]{position:absolute;width:100%;height:100%;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.bd-a[data-v-4c15d29b]{margin:%?10?% 0}.open-top[data-v-4c15d29b]{-webkit-box-pack:justify;justify-content:space-between}.ad-address[data-v-4c15d29b]{width:100%}.ad-name[data-v-4c15d29b]{width:%?160?%;text-align:right}.ad-a[data-v-4c15d29b]{color:#999}.ad-box .edit-row-in[data-v-4c15d29b]{border-bottom:1px solid #efefef;padding-bottom:%?32?%;margin-bottom:%?32?%}.ad-n[data-v-4c15d29b]{margin-top:%?16?%}.cp-step[data-v-4c15d29b]{background-color:#fff;width:100%;display:block;padding:%?80?% 0 %?200?% 0}.cp-step .inp[data-v-4c15d29b]{width:100%;height:%?100?%;padding:0 %?38?%;background-color:#efefef;margin:%?32?% 0;font-size:%?60?%;text-align:center;letter-spacing:%?20?%;-webkit-box-sizing:border-box;box-sizing:border-box}.c-action[data-v-4c15d29b]{-webkit-box-pack:justify;justify-content:space-between;margin-top:%?60?%;width:100%}.c-button[data-v-4c15d29b]{font-size:%?28?%;height:%?70?%;line-height:%?70?%;margin:0}.can-button[data-v-4c15d29b]{background:none!important;color:#999!important;font-size:%?28?%;height:%?70?%;line-height:%?70?%;margin:0}.cp-step-in[data-v-4c15d29b]{max-width:%?400?%;margin:0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column}.c-img[data-v-4c15d29b]{width:%?400?%;height:%?180?%;display:block;-webkit-border-radius:%?10?%;border-radius:%?10?%}.c-img-box[data-v-4c15d29b]{margin:%?32?% 0;width:%?400?%;height:%?180?%;background-color:#efefef;-webkit-border-radius:%?10?%;border-radius:%?10?%}.savebutton[data-v-4c15d29b]{margin-top:%?32?%}.login-out[data-v-4c15d29b]{text-align:center;padding-bottom:%?60?%}',""]),e.exports=t},"7b9d":function(e,t,a){"use strict";a.r(t);var i=a("bac6"),s=a.n(i);for(var n in i)"default"!==n&&function(e){a.d(t,e,(function(){return i[e]}))}(n);t["default"]=s.a},"8fd1":function(e,t,a){var i=a("6cbf");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=a("4f06").default;s("36fd5fd7",i,!0,{sourceMap:!1,shadowMode:!1})},"983a":function(e,t,a){"use strict";var i=a("8fd1"),s=a.n(i);s.a},bac6:function(e,t,a){"use strict";(function(e){var i=a("4ea4");a("d3b7"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var s=i(a("1da1")),n={data:function(){return{id:0,locked:!1,editData:[],region:"",defaultRegion:["广东省","广州市","番禺区"],defaultRegionCode:"440113",updateLocked:!1,type:"name",isFocus:!1,saveLocked:!1,emailVerCode:"",phoneVerCode:"",recaptchaUrl:"",imgcheck:{locked:!1,img_code:"",token:""},count:60,sms:{locked:!1,token:""},register:{username:"",password:"",nickname:"",inv:"",smsCode:"",smsToken:""}}},onLoad:function(e){var t=this;this.id=e.id,this.getEditData(),uni.$on("reloadAddress",(function(){t.getEditData()}))},onUnload:function(){uni.$off("reloadAddress")},computed:{bar:function(){return this.$store.state.bar},token:function(){return this.$store.state.token},userData:function(){return this.$store.state.userData}},methods:{getRecaptcha:function(){var e=this;this.$refs.popupcode.open(),uni.request({method:"POST",url:this.$store.state.restUrlNormal+"getRecaptcha",data:{number:4,width:400,height:180},success:function(t){403==t.statusCode?uni.showModal({content:t.data.message,showCancel:!1}):(e.recaptchaUrl=t.data.base,e.imgcheck.token=t.data.token)}})},imgCodeCancel:function(){this.$refs.popupcode.close(),this.sms.locked=!1},imgCodeCheck:function(){var e=this;1!=this.imgcheck.locked&&(this.imgcheck.locked=!0,uni.request({method:"POST",url:this.$store.state.restUrlNormal+"imgCodeCheck",data:{img_code:this.imgcheck.img_code,token:this.imgcheck.token,loginType:1},success:function(t){403==t.statusCode?uni.showModal({content:t.data.message,showCancel:!1}):e.sendCode(),e.imgcheck.locked=!1}}))},sendCode:function(){var e=this;1!=this.sms.locked&&(this.sms.locked=!0,uni.request({method:"POST",url:this.$store.state.restUrlNormal+"sendCode",data:{nickname:"",username:"phone"==this.type?this.editData.phone:this.editData.email,password:"",code:"",img_code:this.imgcheck.img_code,invitation_code:"",token:this.imgcheck.token,smsToken:"",luoToken:"",confirmPassword:"",loginType:1},success:function(t){403==t.statusCode?uni.showModal({content:t.data.message,showCancel:!1}):(e.register.smsToken=t.data.token,e.countdown(),e.$refs.popupcode.close())}}))},buildAction:function(e,t){var a=this;t.isset?this.unBuild(e):this.socialLogin(e).then((function(e){a.getEditData()}))},build:function(e){},unBuild:function(e){var t=this;1!=this.locked&&(this.locked=!0,uni.request({method:"post",url:this.$store.state.restUrlNormal+"unBuild",header:this.$store.state.headerToken,data:{user_id:this.id,type:e},success:function(e){"403"==e.statusCode?uni.showToast({title:e.data.message,icon:"error",duration:2e3}):t.getEditData(),t.locked=!1}}))},countdown:function(){var e=this;if(this.count<=1)return this.count=60,void(this.sms.locked=!1);this.count--,setTimeout((function(){e.countdown()}),1e3)},sexChange:function(e){this.$set(this.userData,"sex",e.detail.value)},closePopup:function(){this.saveLocked||(this.isFocus=!1,this.$refs.popup.close())},open:function(e){var t=this;"address"!=e?(this.type=e,this.$refs.popup.open(),setTimeout((function(){t.isFocus=!0}),300)):this.go("/pages/global/address")},loginOut:function(){var e=this;uni.removeStorage({key:"token",success:function(t){e.$store.commit("setToken",""),e.$store.commit("setUserData",""),e.$store.commit("setUserRole",""),uni.clearStorageSync(),uni.reLaunch({url:"/pages/my/index"})}})},handleGetRegion:function(e){this.region=e},chooseFile:function(){var e=this;1!=this.updateLocked&&(this.updateLocked=!0,uni.chooseImage({count:1,success:function(t){var a=t.tempFilePaths;uni.showToast({title:"上传中...",mask:!0,icon:"loading"}),uni.uploadFile({url:e.$store.state.restUrlNormal+"fileUpload",filePath:a[0],name:"file",header:{Authorization:"Bearer "+e.$store.state.token},formData:{post_id:1,type:"avatar"},success:function(t){var a=JSON.parse(t.data);"403"==t.statusCode?uni.showToast({title:t.data.message,icon:"error",duration:2e3}):a[0]&&"error"==a[0]||(e.save("avatar",{user_id:e.id,url:a.url,id:a.id}),e.userData.avatar=a.url,e.$store.commit("setUserData",e.userData)),uni.hideToast(),e.updateLocked=!1}})},fail:function(){e.updateLocked=!1}}))},getEditData:function(){var e=this;uni.request({method:"post",url:this.$store.state.restUrlNormal+"getAuthorSettings",header:this.$store.state.headerToken,data:{user_id:this.id},success:function(t){"403"==t.statusCode?uni.showToast({title:t.data.message,icon:"error",duration:2e3}):e.editData=t.data}})},saveRequest:function(t,a){var i=this;return new Promise((function(s,n){uni.request({method:"post",url:i.$store.state.restUrlNormal+t,header:i.$store.state.headerToken,data:a,success:function(t){if(e("log",t," at pages/my/edit.vue:527"),"403"!=t.statusCode)return uni.showToast({title:"保存成功",icon:"success",duration:2e3}),void s(t.data);uni.showToast({title:t.data.message,icon:"none",duration:2e3}),i.saveLocked=!1}})}))},save:function(e,t){var a=this;return(0,s.default)(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(1!=a.saveLocked){i.next=2;break}return i.abrupt("return");case 2:if(a.saveLocked=!0,"avatar"!=e){i.next=8;break}return i.next=6,a.saveRequest("saveAvatar",t);case 6:i.next=26;break;case 8:if("name"!=a.type){i.next=11;break}return i.next=11,a.saveRequest("saveNickName",{user_id:a.id,name:a.userData.name});case 11:if("desc"!=a.type){i.next=14;break}return i.next=14,a.saveRequest("saveDesc",{user_id:a.id,desc:a.userData.desc});case 14:if("sex"!=a.type){i.next=17;break}return i.next=17,a.saveRequest("saveSex",{user_id:a.id,sex:a.userData.sex});case 17:if("password"!=a.type){i.next=20;break}return i.next=20,a.saveRequest("editPass",{user_id:a.id,password:a.userData.password,repassword:a.userData.repassword});case 20:if("email"!=a.type){i.next=23;break}return i.next=23,a.saveRequest("saveUsername",{username:a.editData.email,password:"",code:a.emailVerCode,img_code:a.imgcheck.img_code,invitation_code:"",token:a.imgcheck.token,smsToken:a.register.smsToken,luoToken:"",confirmPassword:"",loginType:"",user_id:a.userData.id});case 23:if("phone"!=a.type){i.next=26;break}return i.next=26,a.saveRequest("saveUsername",{username:a.editData.phone,password:"",code:a.phoneVerCode,img_code:a.imgcheck.img_code,invitation_code:"",token:a.imgcheck.token,smsToken:a.register.smsToken,luoToken:"",confirmPassword:"",loginType:"",user_id:a.userData.id});case 26:a.$store.commit("setUserData",a.userData),a.saveLocked=!1,a.closePopup();case 29:case"end":return i.stop()}}),i)})))()}}};t.default=n}).call(this,a("0de9")["log"])},f8d2:function(e,t,a){"use strict";a.r(t);var i=a("6b40"),s=a("7b9d");for(var n in s)"default"!==n&&function(e){a.d(t,e,(function(){return s[e]}))}(n);a("983a");var o,d=a("f0c5"),c=Object(d["a"])(s["default"],i["b"],i["c"],!1,null,"4c15d29b",null,!1,i["a"],o);t["default"]=c.exports}}]);