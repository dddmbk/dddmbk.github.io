(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-global-search"],{"0b58":function(t,e,s){"use strict";s("99af"),s("c975"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{key:"",historyKyes:[],data:{data:[],hidden:!0,opt:{post_type:"post-3"}},dataList:[],paged:1,loadmore:"waiting",loadLocked:!1}},onLoad:function(){var t=uni.getStorageSync("searchKeys");t&&(this.historyKyes=t),this.getPost()},onReachBottom:function(){this.dataList.length>0&&this.getResout()},onPullDownRefresh:function(){this.paged=1,this.getResout()},computed:{name:function(){return this.$store.state.opt.name},logo:function(){return this.$store.state.opt.logo},systemInfo:function(){return this.$store.state.systemInfo},bar:function(){return this.$store.state.bar},opt:function(){return this.$store.state.opt}},methods:{getPost:function(){var t=this;uni.request({method:"post",url:this.$store.state.restUrl+"getPostList",data:{post_cat:"",post_count:18,paged:1},success:function(e){403!=e.statusCode&&(t.data["data"]=e.data.posts),uni.stopPullDownRefresh(),t.loadingStatus=!1}})},picked:function(t){this.key=t,this.confirm()},confirm:function(){this.paged=1,this.loadLocked=!1,this.loadmore="waiting",this.getResout(),this.setKeys()},getResout:function(){var t=this;this.loadLocked||(this.paged>1&&(this.loadmore=!0),uni.request({method:"post",url:this.$store.state.restUrlNormal+"getStreamList",data:{paged:this.paged,author:0,s:this.key,pages:!0,post_types:["post","document","newsflashes","circle"]},success:function(e){1==t.paged?(e.data.data.length>0?t.dataList=e.data.data:(t.dataList=[],t.dataList.push("empty"),t.loadmore=!1,t.loadLocked=!0),t.loadingStatus=!1):e.data.data.length>0?t.dataList=t.dataList.concat(e.data.data):(t.loadmore=!1,t.loadLocked=!0),t.paged++,uni.stopPullDownRefresh()}}))},setKeys:function(){-1==this.historyKyes.indexOf(this.key)&&(this.historyKyes.length>=11&&this.historyKyes.pop(),this.historyKyes.unshift(this.key),uni.setStorageSync("searchKeys",this.historyKyes))}}};e.default=a},1261:function(t,e,s){"use strict";var a;s.d(e,"b",(function(){return i})),s.d(e,"c",(function(){return n})),s.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-uni-view",{staticClass:"search"},[s("v-uni-view",{staticClass:"search-form",style:"height:"+t.bar.height+"px;padding-top:"+(t.bar.top+5)+"px"},[s("v-uni-view",{staticClass:"search-box"},[s("b2font",{attrs:{type:"b2search-line",size:"36"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm()}}}),s("v-uni-input",{staticClass:"search-input",attrs:{type:"text","confirm-type":"search",placeholder:"搜索",focus:!0},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}},model:{value:t.key,callback:function(e){t.key=e},expression:"key"}})],1),s("v-uni-button",{staticClass:"text empty cancel",style:"margin-right:"+t.bar.width+"px",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goback()}}},[t._v("取消")])],1),s("v-uni-view",{style:"padding-top:"+(t.bar.top+40)+"px"},[t.dataList.length>0?s("v-uni-view",{staticClass:"resout"},["empty"==t.dataList[0]?s("v-uni-view",{staticClass:"comment-empty"},[s("v-uni-view",[s("b2font",{attrs:{type:"b224gl-starEmpty",size:"100",color:"#f0f0f0"}})],1),s("v-uni-view",{staticClass:"empty-text"},[t._v("没有找到您要的内容")])],1):s("v-uni-view",[s("b2stream",{attrs:{posts:t.dataList}}),s("b2bottom",{attrs:{loadmore:t.loadmore}})],1)],1):s("v-uni-view",{staticClass:"b2mg"},[t.historyKyes.length>0?s("v-uni-view",{staticClass:"search-row mg-t"},[s("v-uni-view",{staticClass:"search-title bold-light mg-b fs14"},[t._v("历史搜索")]),s("v-uni-view",{staticClass:"search-keys"},t._l(t.historyKyes,(function(e,a){return s("v-uni-text",{staticClass:"key",on:{click:function(s){arguments[0]=s=t.$handleEvent(s),t.picked(e)}}},[t._v(t._s(e))])})),1)],1):t._e(),void 0!=t.opt.search?s("v-uni-view",{staticClass:"search-row mg-t"},[s("v-uni-view",{staticClass:"search-title bold-light mg-b fs14"},[t._v("热门搜索")]),s("v-uni-view",{staticClass:"search-keys"},t._l(t.opt.search.keys,(function(e,a){return s("v-uni-text",{staticClass:"key",on:{click:function(s){arguments[0]=s=t.$handleEvent(s),t.picked(e)}}},[t._v(t._s(e))])})),1)],1):t._e(),t.data.data.length>0?s("v-uni-view",{staticClass:"guess post-list mg-t"},[s("v-uni-view",{staticClass:"search-title bold-light mg-b fs14"},[t._v("猜你喜欢")]),s("b2post",{attrs:{list:t.data}})],1):t._e()],1)],1)],1)},n=[]},"330c":function(t,e,s){var a=s("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.search[data-v-217fe3ed]{position:relative}.search-form[data-v-217fe3ed]{display:-webkit-box;display:flex;position:fixed;background-color:#fff;width:100%;top:0;z-index:4;padding:0 12px;-webkit-box-flex:0;flex:0;left:0;-webkit-box-sizing:border-box;box-sizing:border-box;padding-bottom:10px}.search-box[data-v-217fe3ed]{height:%?66?%;background-color:#f2f3f4;display:-webkit-box;display:flex;width:100%;-webkit-box-align:center;align-items:center;padding:0 %?32?% 0 %?24?%;-webkit-border-radius:%?50?%;border-radius:%?50?%;-webkit-box-flex:1;flex:1}.search-input[data-v-217fe3ed]{padding:%?10?% %?10?% %?10?% %?20?%;font-size:%?32?%}.resout[data-v-217fe3ed]{margin-top:%?24?%}.cancel[data-v-217fe3ed]{font-size:%?28?%;width:%?140?%;padding-right:0}.cancel[data-v-217fe3ed]::after{border:0}.search-keys[data-v-217fe3ed]{display:-webkit-box;display:flex;flex-flow:wrap}.key[data-v-217fe3ed]{display:inline-block;background-color:#f0f1f2;font-size:%?26?%;height:%?52?%;line-height:%?52?%;padding:0 %?20?%;-webkit-border-radius:%?50?%;border-radius:%?50?%;margin-right:%?16?%;margin-bottom:%?16?%}',""]),t.exports=e},7717:function(t,e,s){"use strict";s.r(e);var a=s("1261"),i=s("f9ad");for(var n in i)"default"!==n&&function(t){s.d(e,t,(function(){return i[t]}))}(n);s("b62e");var o,r=s("f0c5"),d=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"217fe3ed",null,!1,a["a"],o);e["default"]=d.exports},b62e:function(t,e,s){"use strict";var a=s("e3305"),i=s.n(a);i.a},e3305:function(t,e,s){var a=s("330c");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=s("4f06").default;i("5fd1476b",a,!0,{sourceMap:!1,shadowMode:!1})},f9ad:function(t,e,s){"use strict";s.r(e);var a=s("0b58"),i=s.n(a);for(var n in a)"default"!==n&&function(t){s.d(e,t,(function(){return a[t]}))}(n);e["default"]=i.a}}]);