(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-circle-index"],{"123a":function(t,e,a){"use strict";a.r(e);var i=a("502a"),o=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=o.a},"394f":function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return i}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"page-content circle-index"},[t.loadingStatus?i("b2Loading",{attrs:{status:t.loadingStatus}}):[i("v-uni-view",{staticClass:"circle-term"},[i("v-uni-view",{staticClass:"t-top flex-center b2mg"},["hot"==t.termtype?i("v-uni-view",[t._v("热门"+t._s(t.opt.mNames.circle_name))]):i("v-uni-view",[t._v("我加入的"+t._s(t.opt.mNames.circle_name))]),i("v-uni-view",{staticClass:"more-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.go("/pages/circle/all-circle")}}},[t._v("查看更多"),i("b2font",{attrs:{type:"b2arrow-right-s-line",size:"30"}})],1)],1),i("v-uni-view",{staticClass:"t-list flex-center"},[i("v-uni-scroll-view",{staticClass:"scroll-view_H",attrs:{"scroll-x":"true","scroll-left":"0"}},t._l(t.terms,(function(e,a){return i("v-uni-view",{key:a,staticClass:"t-l-l t-item b2radius",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.go("/pages/circle/category?id="+e.id)}}},[i("v-uni-view",{staticClass:"count bold"},[t._v(t._s(t.nFormatter(e.topic_count)))]),i("v-uni-view",{staticClass:"c-info"},[i("v-uni-view",{staticClass:"c-info-in"},[i("v-uni-text",{staticClass:"t-n lin-1 lin-2",domProps:{textContent:t._s(e.name)}}),i("v-uni-view",{staticClass:"t-m"},[i("v-uni-text",[t._v(t._s(t.opt.mNames.circle_member)+" "+t._s(t.nFormatter(e.user_count)))])],1)],1)],1),i("v-uni-image",{staticClass:"t-i b2radius",attrs:{src:e.icon,"lazy-load":!0,mode:"aspectFill"}})],1)})),1)],1)],1),i("v-uni-view",{staticClass:"po-topic",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.poTopic.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"p-t flex-center"},[t.userData.avatar?i("v-uni-view",[i("v-uni-image",{staticClass:"avatar",attrs:{"lazy-load":!0,src:t.userData.avatar}})],1):i("v-uni-view",[i("v-uni-image",{staticClass:"avatar",attrs:{"lazy-load":!0,src:a("5567")}})],1),i("v-uni-view",{staticClass:"p-area"},[t._v("分享点新鲜事...")])],1),i("v-uni-view",{staticClass:"p-tools flex-center"},[i("v-uni-view",{staticClass:"say flex-center"},[i("b2font",{attrs:{type:"b2image-fill",size:"40"}}),i("v-uni-text",{staticClass:"bold-light"},[t._v("图片")])],1),i("v-uni-view",{staticClass:"ask flex-center"},[i("b2font",{attrs:{type:"b2movie-fill",size:"40"}}),i("v-uni-text",{staticClass:"bold-light"},[t._v("视频")])],1),i("v-uni-view",{staticClass:"vote flex-center"},[i("b2font",{attrs:{type:"b2bar-chart-fill",size:"40"}}),i("v-uni-text",{staticClass:"bold-light"},[t._v("投票")])],1),i("v-uni-view",{staticClass:"guess flex-center"},[i("b2font",{attrs:{type:"b2heart-pulse-line",size:"40"}}),i("v-uni-text",{staticClass:"bold-light"},[t._v("你猜")])],1)],1)],1),i("v-uni-view",[i("b2topic",{attrs:{list:t.topics,vtype:"image"},on:{update:function(e){arguments[0]=e=t.$handleEvent(e),t.updateData.apply(void 0,arguments)},deleteTopic:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteTopic.apply(void 0,arguments)}}}),i("b2bottom",{attrs:{loadmore:t.loadmore}})],1)]],2)},s=[]},"502a":function(t,e,a){"use strict";a("99af"),a("a434"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{terms:[],termtype:"hot",topics:{data:[]},loadingStatus:!0,loadmore:"waiting",paged:1,loadLocked:!1}},onReachBottom:function(){this.getTopics()},onPullDownRefresh:function(){this.paged=1,this.getTopics()},onLoad:function(){var t=this;uni.$on("reloadTopicData",(function(e){t.reloadData(e)})),this.loadingStatus&&this.getTopics()},created:function(){var t=this;uni.$on("getTopicData",(function(e){t.addNewTopic(e)}))},onShareAppMessage:function(t){return{title:this.opt.mNames.circle_name,path:"/pages/circle/index"}},onReady:function(){uni.setNavigationBarTitle({title:this.opt.mNames.circle_name})},onUnload:function(){uni.$off("getTopicData"),uni.$off("deleteTopic"),uni.$off("reloadTopicData")},computed:{userData:function(){return this.$store.state.userData},token:function(){return this.$store.state.token},opt:function(){return this.$store.state.opt}},methods:{reloadData:function(t){var e=this;uni.request({method:"post",url:this.$store.state.restUrlNormal+"getDataByTopicId",header:this.$store.state.headerToken,data:{topic_id:this.topics.data.data[t].topic_id},success:function(a){"403"!=a.statusCode&&e.$set(e.topics.data.data,t,a.data)}})},deleteTopic:function(t){this.topics.data.data.splice(t,1)},updateData:function(t,e,a){var i=this;"vote"==e&&t&&t.then((function(t){i.$set(i.topics.data.data[a].meta.vote,"up",i.topics.data.data[a].meta.vote.up+t.up),i.$set(i.topics.data.data[a].meta.vote,"down",i.topics.data.data[a].meta.vote.down+t.down),t.up>0?i.$set(i.topics.data.data[a].meta.vote,"isset_up",!0):i.$set(i.topics.data.data[a].meta.vote,"isset_up",!1),t.down>0?i.$set(i.topics.data.data[a].meta.vote,"isset_down",!0):i.$set(i.topics.data.data[a].meta.vote,"isset_down",!1),i.$set(i.topics.data.data[a].meta.vote,"locked",!1)}))},addNewTopic:function(t){this.topics.data.data.unshift(t)},poTopic:function(){this.token?this.go("/pages/circle/po-topic"):this.go("/pages/global/login")},getTopics:function(){var t=this;this.loadLocked||(this.paged>1&&(this.loadmore=!0),uni.request({method:"post",url:this.$store.state.restUrl+"getCircleIndex",header:this.$store.state.headerToken,data:{paged:this.paged,type:"all",role:"all",file:"all"},success:function(e){403!=e.statusCode&&(1==t.paged?(t.terms=e.data.terms,t.topics.data=e.data.topics,t.termtype=e.data.term_type,t.topics.hidden=!0,t.loadingStatus=!1):e.data.topics.data.length>0?t.topics.data.data=t.topics.data.data.concat(e.data.topics.data):(t.loadLocked=!0,t.loadmore=!1),t.paged++,uni.stopPullDownRefresh())}}))}}};e.default=i},5567:function(t,e,a){t.exports=a.p+"static/img/default-avatar.4b0fc020.png"},"80f5":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".scroll-view_H[data-v-13d853ee]{white-space:nowrap;height:%?172?%}.page-content[data-v-13d853ee]{background-color:#f6f6f6;height:100%}.t-top[data-v-13d853ee]{-webkit-box-pack:justify;justify-content:space-between;font-size:%?28?%;margin-bottom:%?24?%;padding-top:%?24?%}.t-item[data-v-13d853ee]:nth-child(1){margin-left:%?24?%}.t-item[data-v-13d853ee]{width:%?132?%;height:%?172?%;display:inline-block;background:#f5f6f7;position:relative;-webkit-border-radius:%?8?%;border-radius:%?8?%}.t-item + .t-item[data-v-13d853ee]{margin-left:%?24?%}.t-list[data-v-13d853ee]{margin-bottom:%?30?%}.po-topic[data-v-13d853ee]{margin:%?20?% 0;padding:%?20?% %?32?%;background-color:#fff}.p-t .avatar[data-v-13d853ee]{width:%?70?%;height:%?70?%;margin-right:%?16?%;-webkit-border-radius:100%;border-radius:100%;display:block}.p-area[data-v-13d853ee]{border:1px solid #e8e8e8;width:100%;height:%?68?%;-webkit-border-radius:%?8?%;border-radius:%?8?%;line-height:%?68?%;font-size:%?28?%;color:#c0cade;padding-left:%?16?%}.dot[data-v-13d853ee]{margin:0 %?10?%}.count[data-v-13d853ee]{position:absolute;right:%?0?%;top:%?0?%;background-color:#fff;z-index:3;font-size:%?22?%;height:%?30?%;line-height:%?30?%;padding:0 %?16?%;color:#7d7d7d;-webkit-border-bottom-left-radius:%?20?%;border-bottom-left-radius:%?20?%}.c-info[data-v-13d853ee]{position:absolute;height:100%;width:100%;left:0;top:0;background:-webkit-gradient(linear,left top,left bottom,from(transparent),to(rgba(0,0,0,.5)));background:-webkit-linear-gradient(top,transparent,rgba(0,0,0,.5));background:linear-gradient(180deg,transparent,rgba(0,0,0,.5));white-space:break-spaces;z-index:3;color:#fff}.c-info-in[data-v-13d853ee]{position:absolute;bottom:0;padding:%?16?%;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.t-m[data-v-13d853ee]{font-size:%?20?%;font-weight:700;display:-webkit-box;display:flex;opacity:.7}.t-n[data-v-13d853ee]{font-size:%?20?%;font-weight:700;margin-bottom:%?8?%}.t-i[data-v-13d853ee]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1}.say .b2font[data-v-13d853ee]{color:#4caf50}.ask .b2font[data-v-13d853ee]{color:#f35}.guess .b2font[data-v-13d853ee]{color:#ffa41b}.vote .b2font[data-v-13d853ee]{color:#1a85ff}.p-tools[data-v-13d853ee]{margin-top:%?24?%;font-size:%?28?%}.p-tools .flex-center[data-v-13d853ee]{width:25%;-webkit-box-pack:center;justify-content:center}.p-tools .flex-center + .flex-center[data-v-13d853ee]{border-left:1px solid #e8e8e8}.p-tools .b2font[data-v-13d853ee]{margin-right:%?8?%;font-weight:400}",""]),t.exports=e},"894b":function(t,e,a){"use strict";a.r(e);var i=a("394f"),o=a("123a");for(var s in o)"default"!==s&&function(t){a.d(e,t,(function(){return o[t]}))}(s);a("e718");var n,d=a("f0c5"),r=Object(d["a"])(o["default"],i["b"],i["c"],!1,null,"13d853ee",null,!1,i["a"],n);e["default"]=r.exports},e23a:function(t,e,a){var i=a("80f5");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("4f06").default;o("7d98e0ba",i,!0,{sourceMap:!1,shadowMode:!1})},e718:function(t,e,a){"use strict";var i=a("e23a"),o=a.n(i);o.a}}]);